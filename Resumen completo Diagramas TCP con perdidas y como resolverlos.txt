### ğŸ“„ Resumen completo: Diagramas TCP con pÃ©rdidas y cÃ³mo resolverlos

---

### âœ… Â¿QuÃ© es un diagrama temporal TCP?

Es un esquema que muestra, flecha a flecha, cÃ³mo se intercambian los segmentos entre un emisor (A) y un receptor (B):

* Establecimiento (3-way handshake)
* EnvÃ­o de datos
* Confirmaciones (ACK)
* Retransmisiones si hay pÃ©rdidas

### ğŸ”‘ PASOS PARA RESOLVERLOS

**1ï¸âƒ£ Establecimiento de conexiÃ³n (3-way handshake)**

* A â†’ B: SYN (seq = x)
* B â†’ A: SYN-ACK (seq = y, ack = x + 1)
* A â†’ B: ACK (ack = y + 1)
  âœ… Solo despuÃ©s de esto se envÃ­an datos.

**2ï¸âƒ£ Dividir los datos en segmentos**

* Calcula cuÃ¡ntos segmentos necesitas:

```
Total datos / MSS = nÃºmero de segmentos
```

âœ… Cada segmento lleva:

* seq â†’ nÃºmero de secuencia
* ack â†’ nÃºmero de confirmaciÃ³n
* win â†’ ventana de recepciÃ³n
* len â†’ longitud de datos

**3ï¸âƒ£ Identificar pÃ©rdidas**

* Marca los segmentos que se pierden.
* TCP actÃºa dependiendo:

  * Si no recibe ACK â†’ espera timeout â†’ retransmite.
  * Si recibe 3 ACK duplicados â†’ fast retransmit.

**4ï¸âƒ£ Dibujar el esquema**

* Usa flechas inclinadas:

```
A â†’ B: segmentos (seq, len)
B â†’ A: ACKs (ack)
```

* Marca retransmisiones.

### ğŸ›  EJEMPLO PASO A PASO (del enunciado)

**Datos:**

* A envÃ­a 2000 bytes a B.
* MSS = 500 bytes â†’ 4 segmentos.
* Ventana A = 2500 bytes.
* Ventana B = 1500 bytes.
* Primer y tercer segmento de datos de A se pierden.

**Secuencia:**
1ï¸âƒ£ 3-way handshake:

* A â†’ B: SYN (seq = 0)
* B â†’ A: SYN-ACK (seq = 0, ack = 1)
* A â†’ B: ACK (ack = 1)

2ï¸âƒ£ EnvÃ­o de datos:

* A â†’ B: Segmento 1 (seq = 1, len = 500) â†’ SE PIERDE
* A â†’ B: Segmento 2 (seq = 501, len = 500)
* B â†’ A: ACK 1001 (confirmando hasta aquÃ­)
* A â†’ B: Segmento 3 (seq = 1001, len = 500) â†’ SE PIERDE
* A â†’ B: Segmento 4 (seq = 1501, len = 500)
* B â†’ A: ACK 2001 (Ãºltimo correcto recibido)

3ï¸âƒ£ RetransmisiÃ³n tras timeout:

* A â†’ B: Retransmite segmento 1 (seq = 1, len = 500)
* B â†’ A: ACK 2001 (ya estaba completo)
* A â†’ B: Retransmite segmento 3 (seq = 1001, len = 500)
* B â†’ A: ACK 2001 (ya estaba completo)

âœ… Final: todos los datos confirmados.

### âš  PUNTOS CLAVE A RECORDAR

* El nÃºmero de secuencia sube por cada byte (no por segmento).
* El receptor confirma con el ACK el siguiente byte esperado.
* Si se pierden paquetes, TCP espera timeout o usa fast retransmit (si hay 3 ACK duplicados).
* La ventana limita cuÃ¡ntos bytes pueden ir "en vuelo".

### ğŸš€ PRÃCTICA EXTRA

Si quieres ejercicios prÃ¡cticos con otros datos y soluciones resueltas, Â¡pÃ­demelos!
TambiÃ©n puedo prepararte diagramas dibujados o simuladores para practicar paso a paso.

Â¡Mucho Ã¡nimo y a por el examen! ğŸ’ªğŸ“˜
